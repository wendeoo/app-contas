<div class="container" [ngClass]="theme">
    <app-header
    [theme]="theme" [weekDay]="weekDay" [day]="day" [month]="month" [year]="year"
    [isSettings]="isSettings"
    (settingsEmitter)="goToSettings()"
    ></app-header>
    <div class="members" *ngIf="!isLoading">
        Conta selecionada: {{ dbOwner }}
    </div>
    <div class="content" *ngIf="!isLoading && !isSettings">
        <div class="content-header">
            <div *ngIf="selectedDate === ''" class="selected-month"></div>
            <div *ngIf="!isEditingMonth" class="selected-month">{{ selectedDate }}</div>
            <input id="input-month" *ngIf="isEditingMonth" type="month" [(ngModel)]="monthYear">
            <div class="edit-save" (click)="editMonth()">        
                <mat-icon *ngIf="!isEditingMonth">date_range</mat-icon>
                <mat-icon *ngIf="isEditingMonth">save</mat-icon>
            </div>
        </div>
        <div class="expenses">
            <div class="month-expenses">
                <div class="paid-total">Total Pago: <strong>{{ valueCalc('paid') }}</strong></div>
                <div class="unpaid-total">Em Aberto: <strong>{{ valueCalc('unpaid') }}</strong></div>
            </div>
            <div class="add-new-bill">
                <p>Nova Conta</p>
                <mat-icon (click)="createNewBill()">note_add</mat-icon>
            </div> 
        </div>
        <div class="bills-filter" *ngIf="allBills.length">
            <mat-icon (click)="filterBills()">refresh</mat-icon>
            <p (click)="filterBills()">{{ filterName }}</p>
        </div>
        <div class="no-bills" *ngIf="!allBills.length">
            <mat-icon>error_outline</mat-icon>
            Não há contas cadastradas<br>para o mês selecionado.
        </div>
        <div class="cards" *ngIf="selectedDate !== ''">
            <app-bill-card
                *ngFor="let bill of bills; let i = index"
                [billData]="bill"
                [today]="today"
                [selectedPeriod]="monthYear"
                [selectedDb]="selectedDatabase"
                (billPaidEmitter)="checkPaidBills()"
                (deleteEmitter)="removeBill(i)">
            </app-bill-card>
        </div>       
    </div>
    <div class="options-container" *ngIf="!isLoading && isSettings">
        <div class="options-title">Opções</div>
        <div class="options-box">
            <div class="options-name">
                <div class="name-area">
                    <p class="name-change" *ngIf="!isEditingName">Alterar Nome:</p>
                    <p class="name-change" *ngIf="isEditingName">Novo Nome:</p>
                    <p class="current-name" *ngIf="!isEditingName">{{ userName }}</p>
                    <input class="input-edit-name" type="text" *ngIf="isEditingName" [(ngModel)]="newName" maxlength="15" placeholder="{{userName}}">
                    <mat-icon class="icon-edit" *ngIf="!isEditingName" (click)="isEditingName = true">edit</mat-icon>
                    <mat-icon class="icon-edit" *ngIf="isEditingName" (click)="saveName()">save</mat-icon>
                </div>
                <div class="name-help">
                    Altere o nome de exibição. Também altera o nome da conta.
                </div>
            </div>          
            <div class="theme-selector">
                <div class="theme-area">
                    <p>Tema:</p>
                    <div class="selector">
                        <select #themeSelector (change)="getValue(themeSelector.value)" [(ngModel)]="this.theme">
                            <option value="default" >Padrão</option>
                            <option value="warm"    >Quente</option>
                            <option value="ice"     >Frio</option>
                            <option value="money"   >Dinheiro</option>
                            <option value="cute"    >Doce</option>
                            <option value="grass"   >Natureza</option>
                            <option value="business">Negócios</option>
                            <option value="chocolate">Chocolate</option>
                            <option value="violet"  >Violeta</option>
                        </select>
                    </div>
                </div>
                <div class="theme-help">
                    Altera o esquema de cores.
                </div>
            </div>
            <div class="invitation">
                <div class="invitation-area">
                    <p>Convidar:</p>
                    <input class="input-invite-email" type="text" [(ngModel)]="inviteEmail" placeholder="email do convidado">
                    <mat-icon (click)="checkEmailRegistration(inviteEmail)">send</mat-icon>
                </div>
                <div class="invitation-help">
                    Insira o email de um usuário já cadastrado para compartilhar sua conta.
                </div>               
            </div>
            <div class="change-database">
                <div class="change-area">
                    <p>Conta:</p>
                    <div class="change-selector">
                        <select #changeDatabase (change)="changeMyDatabase(changeDatabase.value)" [(ngModel)]="selectedDatabase">
                            <option selected disabled>Escolha a Conta</option>
                            <option value="{{myDBs[i]}}" *ngFor="let db of myDBs; let i = index">Conta {{i+1}}</option>
                        </select>
                    </div>
                    <mat-icon (click)="saveUserInfo()">save</mat-icon>
                </div>
                <div class="change-help">
                    Alterne entre as contas que você tem acesso.
                </div>
            </div>
        </div>
        <div class="exit-app">
            <a (click)="logout()">Sair da Conta<mat-icon>exit_to_app</mat-icon></a>
        </div>
    </div> 
    <div class="loader" *ngIf="isLoading"><app-loader></app-loader>   
</div>
<app-footer [theme]="theme" *ngIf="!isLoading"></app-footer>
